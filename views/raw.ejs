<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Homepage</title>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.3/angular-route.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/css/hexagons.min.css"> 
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script>
  var data = <%-JSON.stringify(raw)%>
  function loading() {
          document.getElementById('results').innerHTML = '<br\><br\><br\><img src="img/loading1.gif" id="image" style="width:150px;height:120px;">';
  }
  function formatting(){
    
    if (data === "invalid"){
      document.getElementById('title').innerHTML = "Please enter a query"
    }
    else if (data === "onNpm"){
      data = "This module is on Npm but not on Travis"
      document.getElementById('data').innerHTML = data
    }
    else if (!data){
      data = "There were no matching entries"
      document.getElementById('data').innerHTML = data
    }
    else {
      var resp = JSON.stringify(data,null,2);
    
      document.getElementById('data').innerHTML = resp;
      document.getElementById('raw').className = "btn btn-link";
    }
    
    /*var resp = "";
    var prop = null;
    for (prop in data) {
      if (typeof(data[prop]) == "object" && data[prop] != null){
        if (data.hasOwnProperty(prop)) {
            resp += prop + " = " + data[prop] + "<br />";
      }
        for (pr in data[prop]){
          var p = data[prop];
          console.log(p);
        if (p.hasOwnProperty(pr)) {
            resp += pr + " = " + p[pr] + "<br />";
            
        }
      }
      }
      else if (data.hasOwnProperty(prop)) {
          resp += prop + " = " + data[prop] + "<br />";
    }
      document.getElementById('data').innerHTML = resp
    }
  }*/
}
function raw(){
  document.getElementById('data').innerHTML = data
}
  </script>
  <style type="text/css">
  #content{
    padding-top:70px;
    width:100%;
    text-align: center;
  }
  #footer{
    position:fixed;
    bottom:0;
    width:100%;
    height:70px;
    text-align: center;
    background-color: #FFFFFF;
  }
#results{
  padding-top:50px;
  width: 700px ;
  margin-bottom: 80px;
  margin-left: auto ;
  margin-right: auto ;
  text-align: center;
}

  </style>
</head>
<body onload="formatting()">
  
  <div>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <a class="navbar-brand">TravisCI Search</a>
      <ul class="nav navbar-nav">
        <li class="active"><a href="/">Home</a></li>
        <li><a href="/about">About</a></li>
      </ul>
    </div>
  </nav>
    <div class="search" id="content">
      <h1><a href="https://travis-ci.org/"><img src="/img/travis-logo.png" style="width:150px;height:75px;"></a> Search</h1><br>
      <form action="/search" method="POST" >
        <input type="text" name="query" placeholder="Enter module name" style="width:200px;height:40px;"/>
        <input class="btn btn-danger" onclick="this.value='Loading';loading()" id="submit" type="submit" value="Submit" style="width:100px;height:35px;display:inline" />
      </form>
    </div>
  <div class ="results" id="results">
    <p class="lead" id ="title">Raw data for: <em><%= input%></em></p>
    <HR>
      <br>
    <pre><p class="lead" id="data"><br><br></p></pre>
    <br>
    <HR>
  </div>
  <div id="footer">
    <footer>
      <a href="https://www.linkedin.com/in/matthew-o-connor-8972a985?authType=NAME_SEARCH&authToken=IAWc" class="hb-xs-margin"><span class="hb hb-xs spin-icon"><i class="fa fa-linkedin-square"></i></span></a>
      <a href="https://github.com/matt-oc"><span class="hb hb-xs spin-icon"><i class="fa fa-github-square"></i></span></a>
      <a href="https://www.facebook.com/matthew.oconnor.9847"><span class="hb hb-xs spin-icon"><i class="fa fa-facebook"></i></span></a>
      <a href="https://twitter.com/MattOC1989"><span class="hb hb-xs spin-icon"><i class="fa fa-twitter"></i></span></a>
    </footer>
  </div>
  <script src="/js/jquery-2.1.0.min.js"></script>
  <script src="/js/hexagons.min.js"></script>
</body>
